/* Author: Andy Murphy

*/function expandPost(e){var t=e.height();e.css("height","auto");var n=e.height();e.height(t).animate({height:n},1e3)}function contractPost(e){e.animate({height:100},1e3)}function isScrolledIntoView(e){var t=$(window).scrollTop(),n=t+$(window).height(),r=e.offset().top,i=r+e.height();return i<=n&&r>=t?e:!1}$(document).ready(function(){var e=$("html").hasClass("touch"),t=$("html").hasClass("csstransitions"),n=$(window).width(),r=!1;$(window).ajaxStart(function(){r=!0}).ajaxStop(function(){r=!1});$("input, textarea").placeholder();$(window).scrollTop(0);var i=!1;n<=767&&(i=!0);if(!i){$(".scroll").click(function(t){if($(this.hash).offset()){$("html,body").animate({scrollTop:$(this.hash).offset().top-70},500,function(){e&&$(".navbar").css("top",$(window).scrollTop())});return!1}return!0});if(location.hash!==""){var s=$("a[name="+location.hash.substring(1)+"]");s.length&&$("html,body").animate({scrollTop:$(s).offset().top-115},500)}}e&&!i&&$(window).bind("scrollstop",function(){$(".navbar").css("top",$(window).scrollTop())});$(".talktous-bar").click(function(e){e.preventDefault();$(".talktous").slideToggle("slow")});$(".talktous-close").click(function(e){e.preventDefault();$(".talktous").slideUp("slow")});$("#talk_submit").click(function(){var e=!1,t=$("#id_name");if(t.val().length===0||t.val()==="Name:"){$("#help_name").html("Please enter your name");t.addClass("error");e=!0}else{$("#help_name").html("");t.removeClass("error")}var n=$("#id_telephone");if(n.val().length===0||n.val().length<10||n.val()==="Telephone:"){$("#help_telephone").html("Please enter a valid telephone number");n.addClass("error");e=!0}else{$("#help_telephone").html("");n.removeClass("error")}var r=$("#id_email");if(r.val().length===0||r.val()==="Email:"){$("#help_email").html("Please enter a valid email address");r.addClass("error");e=!0}else{$("#help_email").html("");r.removeClass("error")}return e?!1:!0});$("#tweets").length!==0&&$("#tweets").load("/blog/ajax/tweets/");if($(".blog").length){$(".blog .read-more").livequery("click",function(e){e.preventDefault();$(this).parent().parent().hide();$(this).parent().parent().prev().find(".post-content-fade").hide();expandPost($(this).parent().parent().prev());$(this).parent().parent().next().show()});$(".blog .read-less").livequery("click",function(e){e.preventDefault();$(this).parent().parent().hide();$(this).parent().parent().prev().prev().find(".post-content-fade").show();contractPost($(this).parent().parent().prev().prev());$(this).parent().parent().prev().show()});$(".blog h2.post-title a").livequery("click",function(e){e.preventDefault();var t=$(this).parent().next().next().next();if(t.next().css("display")!=="none"){t.find(".post-content-fade").hide();t.next().hide();t.next().next().show();expandPost(t)}else{contractPost(t);t.find(".post-content-fade").show();t.next().show();t.next().next().hide()}});$(".blog-index").length>0&&$(".end-post").length>0&&$(window).scroll(function(){var e=$(".end-post").last();if(e.hasClass("scrolled")===!1&&isScrolledIntoView(e)!==!1&&!r){e.addClass("scrolled");$.get("/blog/ajax/post/"+e.attr("id")+"/",function(e){$(".posts").append(e)},"html")}})}});